{"version":3,"sources":["components/Header.js","images/filler.jpg","components/Image.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ConfirmPopup.js","components/ImagePopup.js","utils/constants.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","utils/api.js","components/RenderLoading.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","className","href","target","Image","src","alt","onClick","useState","isLoadError","setIsLoadError","useEffect","filler","onError","CurrentUserContext","React","createContext","Card","getCard","card","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","likeOnCard","cardLikeButtonClassName","cardDeleteButtonClassName","type","link","name","length","Main","onEditProfile","onAddPlace","onEditAvatar","onCardClick","cards","avatar","about","map","Footer","currentDate","Date","getFullYear","PopupWithForm","title","submitButtonText","isOpen","onClose","onSubmit","children","isValidity","isSubmitting","isAnyParamsOnDisabled","isDisabledDefault","noValidate","disabled","ConfirmPopup","onDeleteCard","isLoading","evt","preventDefault","ImagePopup","validationResult","validator","fieldName","Object","keys","errorKey","errorResult","reduce","acc","item","validators","userName","required","value","minLength","maxLength","description","EditProfilePopup","onUpdateUser","setIsDisabledDefault","formValues","setFormValues","errors","setErrors","undefined","handleInputChange","useCallback","state","userNameValidationRusult","descriptionValidationRusult","isUserNameInvalid","values","Boolean","isDescriptionInvalid","isSubmitDisabled","isAnyParamsUserNameValid","isAnyParamsDescriptionValid","id","onChange","EditAvatarPopup","onUpdateAvatar","avatarValue","useRef","current","placeholder","ref","cardName","cardLink","url","test","AddPlacePopup","cardNameValidationResult","cardLinkValidationResult","isСardNameInvalid","isСardLinkInvalid","isAnyParamsCardNameValid","isAnyParamsCardLinkValid","api","options","this","_baseUrl","baseUrl","_headers","headers","fetch","method","then","res","ok","json","Promise","reject","status","all","getCards","getUserInfo","body","JSON","stringify","cardId","hasLike","avatarUrl","authorization","RenderLoading","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isConfirmPopupOpen","setIsConfirmPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","dataLoading","setDataLoading","isLoadingProfileInfo","setIsLoadingProfileInfo","isLoadingCardAdd","setIsLoadingCardAdd","isLoadingProfileAvatar","setIsLoadingProfileAvatar","isLoadingConfirm","setIsLoadingConfirm","currentDeletionCard","setCurrentDeletionCard","isSubmittingProfileInfo","setIsSubmittingProfileInfo","isSubmittingCardAdd","setIsSubmittingCardAdd","isSubmittingDeleteConfirm","setIsSubmittingDeleteConfirm","isSubmittingProfileAvatar","setIsSubmittingProfileAvatar","closeAllPopups","getInitialData","data","userInfo","catch","error","console","log","Provider","toggleCardLike","newCard","oldCard","userObj","setUserInfo","finally","createCard","deleteCard","oldCards","filter","avatarObj","updateAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.87fccc5a.chunk.js","sourcesContent":["function Header() {\r\n  return (\r\n    <header className=\"header\">\r\n      <a href=\"#\" target=\"_self\" className=\"header__logo\" />\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","export default __webpack_public_path__ + \"static/media/filler.6c929a1e.jpg\";","import { useState, useEffect } from 'react';\r\nimport filler from '../images/filler.jpg';\r\n\r\nfunction Image({ src, alt, onClick, className }) {\r\n  const [isLoadError, setIsLoadError] = useState(false);\r\n\r\n  useEffect(() => setIsLoadError(false), [src]);\r\n\r\n  function handleLoadError() {\r\n    setIsLoadError(true);\r\n  }\r\n\r\n  return (\r\n    <img\r\n      onClick={onClick}\r\n      src={isLoadError ? filler : src}\r\n      alt={`Фото: ${alt ? alt : ''}`}\r\n      className={className}\r\n      onError={handleLoadError}\r\n    />\r\n  );\r\n}\r\n\r\nexport default Image;\r\n","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import { useContext } from 'react';\r\nimport Image from './Image';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card({ getCard, card, onCardLike, onCardDelete }) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  // Определяем, являемся ли мы владельцем текущей карточки\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const isLiked = card.likes.some(\r\n    (likeOnCard) => likeOnCard._id === currentUser._id\r\n  );\r\n\r\n  const cardLikeButtonClassName = `element__like\r\n    ${isLiked && 'element__like_active'}`;\r\n  const cardDeleteButtonClassName = `element__trash-button\r\n    ${isOwn && 'element__trash-button_visible'}`;\r\n\r\n  function handleClickImage() {\r\n    getCard(card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    onCardLike(card);\r\n  }\r\n\r\n  function handleDeleteClick() {\r\n    onCardDelete(card);\r\n  }\r\n\r\n  return (\r\n    <li className=\"element\">\r\n      <button\r\n        onClick={handleDeleteClick}\r\n        type=\"button\"\r\n        className={cardDeleteButtonClassName}\r\n      />\r\n      <Image\r\n        src={card.link}\r\n        alt={card.name}\r\n        className=\"element__image\"\r\n        onClick={handleClickImage}\r\n      />\r\n      <div className=\"element__container\">\r\n        <h2 className=\"element__title\"> {card.name} </h2>\r\n        <div className=\"element__like-group\">\r\n          <button\r\n            onClick={handleLikeClick}\r\n            type=\"button\"\r\n            className={cardLikeButtonClassName}\r\n          />\r\n          <h3 className=\"element__like-counter\"> {card.likes.length} </h3>\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import { useContext } from 'react';\r\nimport Card from './Card';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Main({\r\n  onEditProfile,\r\n  onAddPlace,\r\n  onEditAvatar,\r\n  onCardClick,\r\n  cards,\r\n  onCardLike,\r\n  onCardDelete,\r\n}) {\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"main\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__container\">\r\n          <a\r\n            onClick={onEditAvatar}\r\n            target=\"_self\"\r\n            href=\"#\"\r\n            className=\"profile__cover\"\r\n          >\r\n            <img\r\n              alt={`Аватар пользователя ${currentUser.name}`}\r\n              src={currentUser.avatar}\r\n              className=\"profile__avatar\"\r\n            />\r\n          </a>\r\n          <div className=\"profile__info\">\r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <button\r\n              onClick={onEditProfile}\r\n              type=\"button\"\r\n              className=\"profile__button-edit\"\r\n            />\r\n            <p className=\"profile__status\">{currentUser.about}</p>\r\n          </div>\r\n        </div>\r\n        <button\r\n          onClick={onAddPlace}\r\n          type=\"button\"\r\n          className=\"profile__button-add\"\r\n        />\r\n      </section>\r\n      <section>\r\n        <ul className=\"elements\">\r\n          {cards.map((card) => (\r\n            <Card\r\n              onCardDelete={onCardDelete}\r\n              onCardLike={onCardLike}\r\n              getCard={onCardClick}\r\n              card={card}\r\n              key={card._id}\r\n            />\r\n          ))}\r\n        </ul>\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","function Footer() {\r\n  const currentDate = new Date();\r\n\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">\r\n        &copy; {currentDate.getFullYear()}. Mesto-React, Russia\r\n      </p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","function PopupWithForm({\r\n  name,\r\n  title,\r\n  submitButtonText,\r\n  isOpen,\r\n  onClose,\r\n  onSubmit,\r\n  children,\r\n  isValidity,\r\n  isSubmitting,\r\n  isDisabledDefault,\r\n}) {\r\n  const isAnyParamsOnDisabled = isDisabledDefault || isValidity || isSubmitting;\r\n  return (\r\n    <section className={`popup ${isOpen && 'popup_opened'}`}>\r\n      <div className=\"popup__container\">\r\n        <button\r\n          onClick={onClose}\r\n          type=\"button\"\r\n          className=\"popup__button-close\"\r\n        />\r\n        <h2 className=\"popup__title\">{title}</h2>\r\n        <form\r\n          onSubmit={onSubmit}\r\n          noValidate\r\n          name={`form-${name}`}\r\n          className=\"form\"\r\n        >\r\n          {children}\r\n          <button\r\n            disabled={isAnyParamsOnDisabled}\r\n            type=\"submit\"\r\n            className={`form__button ${\r\n              isAnyParamsOnDisabled && 'form__button_disabled'\r\n            }`}\r\n          >\r\n            {submitButtonText}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import PopupWithForm from './PopupWithForm';\r\n\r\nfunction ConfirmPopup({\r\n  isOpen,\r\n  onClose,\r\n  onDeleteCard,\r\n  card,\r\n  isLoading,\r\n  isSubmitting,\r\n}) {\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onDeleteCard(card);\r\n  };\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"delete-confirm\"\r\n      title=\"Вы уверены?\"\r\n      submitButtonText={isLoading ? 'Удаление...' : 'Да'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isSubmitting={isSubmitting}\r\n    />\r\n  );\r\n}\r\n\r\nexport default ConfirmPopup;\r\n","import Image from './Image';\r\n\r\nfunction ImagePopup({ card, onClose }) {\r\n  return (\r\n    <section className={`popup ${card && 'popup_opened'}`}>\r\n      <div className=\"popup__zoom-image\">\r\n        <button\r\n          onClick={onClose}\r\n          type=\"button\"\r\n          className=\"popup__button-close\"\r\n        />\r\n        <Image\r\n          src={card && card.link}\r\n          alt={card && card.name}\r\n          className=\"popup__image\"\r\n        />\r\n        <h2 className=\"popup__title-zoom-image\"> {card && card.name} </h2>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default ImagePopup;\r\n","export const validationResult = (validator, fieldName) => {\r\n  return Object.keys(validator)\r\n    .map((errorKey) => {\r\n      const errorResult = validator[errorKey](fieldName);\r\n      return { [errorKey]: errorResult };\r\n    })\r\n    .reduce((acc, item) => ({ ...acc, ...item }), {});\r\n};\r\n","import { useState, useContext, useEffect, useCallback } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { validationResult } from '../utils/constants';\r\n\r\nconst minUserNameInputLength = 2,\r\n  minDescriptionInputLength = 2,\r\n  maxDescriptionInputLength = 200,\r\n  maxUserNameInputLength = 40;\r\n\r\nconst validators = {\r\n  userName: {\r\n    required: (value) => value === '',\r\n    minLength: (value) => value.length < minUserNameInputLength,\r\n    maxLength: (value) => value.length > maxUserNameInputLength,\r\n  },\r\n  description: {\r\n    required: (value) => value === '',\r\n    minLength: (value) => value.length < minDescriptionInputLength,\r\n    maxLength: (value) => value.length > maxDescriptionInputLength,\r\n  },\r\n};\r\n\r\nfunction EditProfilePopup({\r\n  isOpen,\r\n  onClose,\r\n  onUpdateUser,\r\n  isLoading,\r\n  isSubmitting,\r\n}) {\r\n  const [isDisabledDefault, setIsDisabledDefault] = useState(true);\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const [formValues, setFormValues] = useState({\r\n    userName: '',\r\n    description: '',\r\n  });\r\n\r\n  const [errors, setErrors] = useState({\r\n    userName: {\r\n      required: true,\r\n      minLength: true,\r\n      maxLength: true,\r\n    },\r\n    description: {\r\n      required: true,\r\n      minLength: true,\r\n      maxLength: true,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (currentUser.name !== undefined && currentUser.about !== undefined) {\r\n      setFormValues({\r\n        userName: currentUser.name,\r\n        description: currentUser.about,\r\n      });\r\n    }\r\n    setIsDisabledDefault(true);\r\n  }, [isOpen, currentUser]);\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onUpdateUser({\r\n      name: userName,\r\n      about: description,\r\n    });\r\n  };\r\n\r\n  const handleInputChange = useCallback(\r\n    (evt) => {\r\n      setIsDisabledDefault(false);\r\n      const { name, value } = evt.target;\r\n      setFormValues((state) => ({ ...state, [name]: value }));\r\n    },\r\n    [setFormValues]\r\n  );\r\n\r\n  useEffect(\r\n    function validateInputs() {\r\n      const { userName, description } = formValues;\r\n\r\n      const userNameValidationRusult = validationResult(\r\n        validators.userName,\r\n        userName\r\n      );\r\n\r\n      const descriptionValidationRusult = validationResult(\r\n        validators.description,\r\n        description\r\n      );\r\n\r\n      setErrors({\r\n        userName: userNameValidationRusult,\r\n        description: descriptionValidationRusult,\r\n      });\r\n    },\r\n    [formValues, setErrors]\r\n  );\r\n\r\n  const { userName, description } = formValues;\r\n  const isUserNameInvalid = Object.values(errors.userName).some(Boolean);\r\n  const isDescriptionInvalid = Object.values(errors.description).some(Boolean);\r\n  const isSubmitDisabled = isUserNameInvalid || isDescriptionInvalid;\r\n\r\n  const isAnyParamsUserNameValid =\r\n    errors.userName.required || errors.userName.minLength;\r\n  const isAnyParamsDescriptionValid =\r\n    errors.description.required || errors.description.minLength;\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"profile-edit\"\r\n      title=\"Редактировать профиль\"\r\n      submitButtonText={isLoading ? 'Сохранение...' : 'Сохранить'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isValidity={isSubmitDisabled}\r\n      isSubmitting={isSubmitting}\r\n      isDisabledDefault={isDisabledDefault}\r\n    >\r\n      <fieldset className=\"form__fields\">\r\n        <label className=\"label\">\r\n          <input\r\n            type=\"text\"\r\n            className={`form__input ${\r\n              isUserNameInvalid && 'form__input_type_error'\r\n            }`}\r\n            name=\"userName\"\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"40\"\r\n            id=\"profile-name-input\"\r\n            value={userName}\r\n            onChange={handleInputChange}\r\n          />\r\n          <span\r\n            className={`form__error ${\r\n              isUserNameInvalid && 'form__error_visible'\r\n            }`}\r\n          >\r\n            {isAnyParamsUserNameValid\r\n              ? errors.userName.required\r\n                ? 'Поле обязательно для заполнения'\r\n                : `Введите фразу не короче ${minUserNameInputLength} символов`\r\n              : ''}\r\n            {errors.userName.maxLength &&\r\n              `Превышел лимит в ${maxUserNameInputLength} символов`}\r\n          </span>\r\n        </label>\r\n        <label className=\"label\">\r\n          <input\r\n            type=\"text\"\r\n            className={`form__input ${\r\n              isDescriptionInvalid && 'form__input_type_error'\r\n            }`}\r\n            name=\"description\"\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"100\"\r\n            id=\"profile-status-input\"\r\n            value={description}\r\n            onChange={handleInputChange}\r\n          />\r\n          <span\r\n            className={`form__error ${\r\n              isDescriptionInvalid && 'form__error_visible'\r\n            }`}\r\n          >\r\n            {isAnyParamsDescriptionValid\r\n              ? errors.description.required\r\n                ? 'Поле обязательно для заполнения'\r\n                : `Введите фразу не короче ${minDescriptionInputLength} символов`\r\n              : ''}\r\n            {errors.description.maxLength &&\r\n              `Превышел лимит в ${maxDescriptionInputLength} символов`}\r\n          </span>\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup;\r\n","import { useRef, useEffect } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction EditAvatarPopup({\r\n  isOpen,\r\n  onClose,\r\n  onUpdateAvatar,\r\n  isLoading,\r\n  isSubmitting,\r\n}) {\r\n  const avatarValue = useRef();\r\n\r\n  useEffect(() => {\r\n    avatarValue.current.value = '';\r\n  }, [isOpen]);\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n\r\n    onUpdateAvatar({\r\n      avatar: avatarValue.current.value,\r\n    });\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"update-avatar\"\r\n      title=\"Обновить аватар\"\r\n      submitButtonText={isLoading ? 'Сохранение...' : 'Сохранить'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isSubmitting={isSubmitting}\r\n    >\r\n      <fieldset className=\"form__fields\">\r\n        <label className=\"label\">\r\n          <input\r\n            type=\"url\"\r\n            placeholder=\"Ссылка на фотографию\"\r\n            className=\"form__input form__input_field_avatar-link\"\r\n            name=\"avatarLink\"\r\n            required\r\n            id=\"avatar-link-input\"\r\n            ref={avatarValue}\r\n          />\r\n          <span className=\"form__error avatar-link-input-error\" />\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup;\r\n","import { useState, useEffect, useCallback } from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { validationResult } from '../utils/constants';\r\n\r\nconst minInputLength = 2,\r\n  maxInputLength = 30;\r\n\r\nconst validators = {\r\n  cardName: {\r\n    required: (value) => value === '',\r\n    minLength: (value) => value.length < minInputLength,\r\n    maxLength: (value) => value.length > maxInputLength,\r\n  },\r\n  cardLink: {\r\n    required: (value) => value === '',\r\n    url: (value) => !/^(ftp|http|https):\\/\\/[^ \"]+$/.test(value),\r\n  },\r\n};\r\n\r\nfunction AddPlacePopup({\r\n  isOpen,\r\n  onClose,\r\n  onAddPlace,\r\n  isLoading,\r\n  isSubmitting,\r\n}) {\r\n  const [isDisabledDefault, setIsDisabledDefault] = useState(true);\r\n\r\n  const [formValues, setFormValues] = useState({\r\n    cardName: '',\r\n    cardLink: '',\r\n  });\r\n\r\n  const [errors, setErrors] = useState({\r\n    cardName: {\r\n      required: true,\r\n      minLength: true,\r\n      maxLength: true,\r\n    },\r\n    cardLink: {\r\n      required: true,\r\n      url: true,\r\n    },\r\n  });\r\n\r\n  useEffect(() => {\r\n    setFormValues({\r\n      cardName: '',\r\n      cardLink: '',\r\n    });\r\n    setIsDisabledDefault(true);\r\n  }, [isOpen]);\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n\r\n    onAddPlace({\r\n      name: cardName,\r\n      link: cardLink,\r\n    });\r\n  };\r\n\r\n  const handleInputChange = useCallback(\r\n    (evt) => {\r\n      setIsDisabledDefault(false);\r\n      const { name, value } = evt.target;\r\n      setFormValues((state) => ({ ...state, [name]: value }));\r\n    },\r\n    [setFormValues]\r\n  );\r\n\r\n  useEffect(\r\n    function validateInputs() {\r\n      const { cardName, cardLink } = formValues;\r\n      const cardNameValidationResult = validationResult(\r\n        validators.cardName,\r\n        cardName\r\n      );\r\n      const cardLinkValidationResult = validationResult(\r\n        validators.cardLink,\r\n        cardLink\r\n      );\r\n      setErrors({\r\n        cardName: cardNameValidationResult,\r\n        cardLink: cardLinkValidationResult,\r\n      });\r\n    },\r\n    [formValues, setErrors]\r\n  );\r\n\r\n  const { cardName, cardLink } = formValues;\r\n  const isСardNameInvalid = Object.values(errors.cardName).some(Boolean);\r\n  const isСardLinkInvalid = Object.values(errors.cardLink).some(Boolean);\r\n  const isSubmitDisabled = isСardNameInvalid || isСardLinkInvalid;\r\n\r\n  const isAnyParamsCardNameValid =\r\n    errors.cardName.required || errors.cardName.minLength;\r\n  const isAnyParamsCardLinkValid =\r\n    errors.cardLink.required || errors.cardLink.url;\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"card-add\"\r\n      title=\"Новое место\"\r\n      submitButtonText={isLoading ? 'Добавление...' : 'Добавить'}\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onSubmit={handleSubmit}\r\n      isValidity={isSubmitDisabled}\r\n      isSubmitting={isSubmitting}\r\n      isDisabledDefault={isDisabledDefault}\r\n    >\r\n      <fieldset className=\"form__fields\">\r\n        <label className=\"label\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Название\"\r\n            className={`form__input ${\r\n              isDisabledDefault\r\n                ? ''\r\n                : isСardNameInvalid && 'form__input_type_error'\r\n            }`}\r\n            name=\"cardName\"\r\n            required\r\n            minLength=\"2\"\r\n            maxLength=\"30\"\r\n            id=\"card-name-input\"\r\n            value={cardName}\r\n            onChange={handleInputChange}\r\n          />\r\n          <span\r\n            className={`form__error ${\r\n              isDisabledDefault\r\n                ? ''\r\n                : isСardNameInvalid && 'form__error_visible'\r\n            }`}\r\n          >\r\n            {isAnyParamsCardNameValid\r\n              ? errors.cardName.required\r\n                ? 'Поле обязательно для заполнения'\r\n                : `Введите фразу не короче ${minInputLength} символов`\r\n              : ''}\r\n            {errors.cardName.maxLength &&\r\n              `Превышел лимит в ${maxInputLength} символов`}\r\n          </span>\r\n        </label>\r\n        <label className=\"label\">\r\n          <input\r\n            type=\"url\"\r\n            placeholder=\"Ссылка на картинку\"\r\n            className={`form__input ${\r\n              isDisabledDefault\r\n                ? ''\r\n                : isСardLinkInvalid && 'form__input_type_error'\r\n            }`}\r\n            name=\"cardLink\"\r\n            required\r\n            id=\"card-link-input\"\r\n            value={cardLink}\r\n            onChange={handleInputChange}\r\n          />\r\n          <span\r\n            className={`form__error ${\r\n              isDisabledDefault\r\n                ? ''\r\n                : isСardLinkInvalid && 'form__error_visible'\r\n            }`}\r\n          >\r\n            {isAnyParamsCardLinkValid\r\n              ? errors.cardLink.required\r\n                ? 'Поле обязательно для заполнения'\r\n                : 'Введите URL'\r\n              : ''}\r\n          </span>\r\n        </label>\r\n      </fieldset>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","class Api {\r\n  constructor(options) {\r\n    this._baseUrl = options.baseUrl;\r\n    this._headers = options.headers;\r\n  }\r\n\r\n  // получаем информацию о карточках\r\n  getCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'GET',\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // получаем информацию о пользователе\r\n  getUserInfo() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'GET',\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  getInitialData() {\r\n    return Promise.all([this.getCards(), this.getUserInfo()]);\r\n  }\r\n\r\n  // отправляем информацию о пользователе\r\n  setUserInfo(name, status) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: status,\r\n      }),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // создаем карточку\r\n  createCard(name, link) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: 'POST',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        name: name,\r\n        link: link,\r\n      }),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // удаляем карточку\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\r\n      method: 'DELETE',\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // ставим/убираем лайк\r\n  toggleCardLike(cardId, hasLike) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${cardId}`, {\r\n      method: hasLike ? 'DELETE' : 'PUT',\r\n      headers: this._headers,\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n\r\n  // обновляем аватар\r\n  updateAvatar(avatarUrl) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        avatar: avatarUrl,\r\n      }),\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    });\r\n  }\r\n}\r\n\r\n// создаем класс для связи с сервером\r\nconst api = new Api({\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-21',\r\n  headers: {\r\n    // уникальный токен пользователя\r\n    authorization: 'a3ab0050-d01a-4f5a-9bb4-4a039b0aa641',\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\nexport default api;\r\n","function RenderLoading() {\r\n  return (\r\n    <div className=\"loader-ring\">\r\n      <div className=\"loader-ring__main\">\r\n        <div className=\"loader-ring__child\" />\r\n        <div className=\"loader-ring__child\" />\r\n        <div className=\"loader-ring__child\" />\r\n        <div className=\"loader-ring__child\" />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default RenderLoading;\r\n","import { useState, useEffect } from 'react';\r\nimport '../index.css';\r\nimport Header from './Header';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport ConfirmPopup from './ConfirmPopup';\r\nimport ImagePopup from './ImagePopup';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport api from '../utils/api';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport RenderLoading from './RenderLoading';\r\n\r\nfunction App() {\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\r\n  const [isConfirmPopupOpen, setIsConfirmPopupOpen] = useState(false);\r\n  const [selectedCard, setSelectedCard] = useState(null);\r\n  const [currentUser, setCurrentUser] = useState({});\r\n  const [cards, setCards] = useState([]);\r\n  const [dataLoading, setDataLoading] = useState(true);\r\n  const [isLoadingProfileInfo, setIsLoadingProfileInfo] = useState(false);\r\n  const [isLoadingCardAdd, setIsLoadingCardAdd] = useState(false);\r\n  const [isLoadingProfileAvatar, setIsLoadingProfileAvatar] = useState(false);\r\n  const [isLoadingConfirm, setIsLoadingConfirm] = useState(false);\r\n  const [currentDeletionCard, setCurrentDeletionCard] = useState(null);\r\n  const [isSubmittingProfileInfo, setIsSubmittingProfileInfo] = useState(false);\r\n  const [isSubmittingCardAdd, setIsSubmittingCardAdd] = useState(false);\r\n  const [isSubmittingDeleteConfirm, setIsSubmittingDeleteConfirm] = useState(false);\r\n  const [isSubmittingProfileAvatar, setIsSubmittingProfileAvatar] = useState(false);\r\n\r\n  // загружаем данные пользователя и карточек\r\n  useEffect(() => {\r\n    api\r\n      .getInitialData()\r\n      .then((data) => {\r\n        const [cards, userInfo] = data;\r\n        setDataLoading(false);\r\n        setCards(cards);\r\n        setCurrentUser(userInfo);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }, []);\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(\r\n      (likeOnCard) => likeOnCard._id === currentUser._id\r\n    );\r\n\r\n    api\r\n      .toggleCardLike(card._id, isLiked)\r\n      .then((newCard) => {\r\n        setCards((state) =>\r\n          state.map((oldCard) => (oldCard._id === card._id ? newCard : oldCard))\r\n        );\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    setCurrentDeletionCard(card);\r\n    setIsConfirmPopupOpen(true);\r\n  }\r\n\r\n  function handleDeleteConfirm(card) {\r\n    setIsSubmittingDeleteConfirm(true);\r\n    setIsLoadingConfirm(true);\r\n    api\r\n      .deleteCard(card._id)\r\n      .then(() => {\r\n        setCards((oldCards) =>\r\n          oldCards.filter((oldCard) => oldCard._id !== card._id)\r\n        );\r\n        closeAllPopups();\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      })\r\n      .finally(() => {\r\n        setIsLoadingConfirm(false);\r\n        setIsSubmittingDeleteConfirm(false);\r\n      });\r\n  }\r\n\r\n  const handleAddPlaceSubmit = (newCard) => {\r\n    setIsSubmittingCardAdd(true);\r\n    setIsLoadingCardAdd(true);\r\n    api\r\n      .createCard(newCard.name, newCard.link)\r\n      .then((res) => {\r\n        setCards([res, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      })\r\n      .finally(() => {\r\n        setIsLoadingCardAdd(false);\r\n        setIsSubmittingCardAdd(false);\r\n      });\r\n  };\r\n\r\n  const handleUpdateUser = (userObj) => {\r\n    setIsSubmittingProfileInfo(true);\r\n    setIsLoadingProfileInfo(true);\r\n    api\r\n      .setUserInfo(userObj.name, userObj.about)\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      })\r\n      .finally(() => {\r\n        setIsLoadingProfileInfo(false);\r\n        setIsSubmittingProfileInfo(false);\r\n      });\r\n  };\r\n\r\n  const handleUpdateAvatar = (avatarObj) => {\r\n    setIsSubmittingProfileAvatar(true);\r\n    setIsLoadingProfileAvatar(true);\r\n    api\r\n      .updateAvatar(avatarObj.avatar)\r\n      .then((res) => {\r\n        setCurrentUser(res);\r\n        closeAllPopups();\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      })\r\n      .finally(() => {\r\n        setIsLoadingProfileAvatar(false);\r\n        setIsSubmittingProfileAvatar(false);\r\n      });\r\n  };\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  function handleCardClick(selectedCard) {\r\n    setSelectedCard(selectedCard);\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsConfirmPopupOpen(false);\r\n    setSelectedCard(null);\r\n  }\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      {dataLoading ? (\r\n        <RenderLoading />\r\n      ) : (\r\n        <CurrentUserContext.Provider value={currentUser}>\r\n          <Header />\r\n          <Main\r\n            cards={cards}\r\n            onCardLike={handleCardLike}\r\n            onCardDelete={handleCardDelete}\r\n            onEditProfile={handleEditProfileClick}\r\n            onAddPlace={handleAddPlaceClick}\r\n            onEditAvatar={handleEditAvatarClick}\r\n            onCardClick={handleCardClick}\r\n          />\r\n          <Footer />\r\n          <EditProfilePopup\r\n            isLoading={isLoadingProfileInfo}\r\n            onUpdateUser={handleUpdateUser}\r\n            isOpen={isEditProfilePopupOpen}\r\n            onClose={closeAllPopups}\r\n            isSubmitting={isSubmittingProfileInfo}\r\n          />\r\n          <AddPlacePopup\r\n            isLoading={isLoadingCardAdd}\r\n            isOpen={isAddPlacePopupOpen}\r\n            onAddPlace={handleAddPlaceSubmit}\r\n            onClose={closeAllPopups}\r\n            isSubmitting={isSubmittingCardAdd}\r\n          />\r\n          <ConfirmPopup\r\n            isOpen={isConfirmPopupOpen}\r\n            card={currentDeletionCard}\r\n            onDeleteCard={handleDeleteConfirm}\r\n            onClose={closeAllPopups}\r\n            isLoading={isLoadingConfirm}\r\n            isSubmitting={isSubmittingDeleteConfirm}\r\n          />\r\n          <ImagePopup card={selectedCard} onClose={closeAllPopups} />\r\n          <EditAvatarPopup\r\n            isLoading={isLoadingProfileAvatar}\r\n            isOpen={isEditAvatarPopupOpen}\r\n            onUpdateAvatar={handleUpdateAvatar}\r\n            onClose={closeAllPopups}\r\n            isSubmitting={isSubmittingProfileAvatar}\r\n          />\r\n        </CurrentUserContext.Provider>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();"],"sourceRoot":""}